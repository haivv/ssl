<!DOCTYPE html>
<html>

<head>
    <title>Upload Multiple Images</title>
    <script>
        function updateFileInputs() {
            const numFiles = document.getElementById('numFiles').value;
            const fileInputsContainer = document.getElementById('fileInputsContainer');
            fileInputsContainer.innerHTML = '';

            for (let i = 0; i < numFiles; i++) {
                const input = document.createElement('input');
                input.type = 'file';
                input.name = 'images';
                fileInputsContainer.appendChild(input);
                fileInputsContainer.appendChild(document.createElement('br'));
            }
        }
    </script>
</head>

<body>
    <h1>Upload Multiple Images</h1>
    <% let numFiles=3;  %>
    <form action="/select" method="post">
        <label for="numFiles">Select number of images to upload:</label>
        <select id="numFiles" name="numFiles" onchange="updateFileInputs()">

            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3" selected>3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
        <button type="submit">Confirm</button>
    </form>

    <form action="/upload" method="post" enctype="multipart/form-data">
        <div id="fileInputsContainer">

            <% for(let i=0; i < numFiles; i++) { %>
                <input type="file" name="images">
                <br>
                <% } %>
        </div>
        <button type="submit">Upload</button>
    </form>
</body>

</html>